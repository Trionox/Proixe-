<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout - Proixe Store</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding-bottom:70px;background:#f9f9f9;}
header{background:#2c3e50;color:white;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;}
header h1{margin:0;font-size:22px;}
header nav a{color:white;margin-left:15px;text-decoration:none;font-weight:bold;}
header nav a:hover{text-decoration:underline;}
.checkout-box{max-width:500px;margin:20px auto;background:white;padding:20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.2);}
.checkout-box input, .checkout-box select{width:100%;padding:10px;margin:5px 0;border-radius:5px;border:1px solid #ccc;}
button{padding:10px 15px;background:#3498db;color:white;border:none;border-radius:5px;cursor:pointer;margin-top:10px;}
button:hover{background:#1d6fa5;}
</style>
</head>
<body>

<header>
<h1>Proixe Store</h1>
<nav>
<a href="index.html">Home</a>
<a href="cart.html">Cart</a>
<a href="account.html">Account</a>
</nav>
</header>

<div class="checkout-box">
<h2>Checkout</h2>
<input type="text" id="name" placeholder="Name">
<input type="text" id="phone" placeholder="Phone">
<input type="text" id="address" placeholder="Address">
<select id="payment">
<option value="Cash">Cash</option>
<option value="Card">Card</option>
</select>
<h3 id="total"></h3>
<button onclick="placeOrder()">Place Order</button>
</div>

<!-- EmailJS CDN -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
(function(){
 emailjs.init("4kwsQ7QvxZFeT3Nbr"); // ← बस Public Key डालो
})();

// Load cart
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let total = cart.reduce((sum, item) => sum + item.discount*item.qty, 0);
document.getElementById("total").innerText = "Total: ₹" + total;

function placeOrder(){
 if(cart.length===0){ alert("Cart empty!"); return; }

 const name = document.getElementById("name").value.trim();
 const phone = document.getElementById("phone").value.trim();
 const address = document.getElementById("address").value.trim();
 const payment = document.getElementById("payment").value;

 if(!name || !phone || !address){ alert("Fill all fields!"); return; }

 // Save order in localStorage
 let orders = JSON.parse(localStorage.getItem("orders")) || [];
 const order = {items: cart, total, name, phone, address, payment};
 orders.push(order);
 localStorage.setItem("orders", JSON.stringify(orders));

 // EmailJS send (placeholders empty for now)
 emailjs.send("TRIO-45","template_5s8qx2e",{
   user_name: name,
   user_phone: phone,
   user_address: address,
   user_payment: payment,
   order_items: JSON.stringify(cart,null,2),
   order_total: total
 }).then(function(response){
   console.log('Email send attempted', response);
 }, function(error){
   console.log('Email failed (placeholders empty)', error);
 });

 // Clear cart
 localStorage.removeItem("cart");
 alert("Order placed successfully!");
 window.location.href="index.html";
}
</script>

</body>
</html>
