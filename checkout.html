<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout - Proixe Store</title>
<style>
body{font-family:Arial,sans-serif;background:#f9f9f9;margin:0;padding-bottom:70px;}
header{background:#2c3e50;color:white;padding:15px 20px;display:flex;justify-content:space-between;align-items:center;}
header h1{margin:0;font-size:22px;}
header nav a{color:white;margin-left:15px;text-decoration:none;font-weight:bold;}
header nav a:hover{text-decoration:underline;}
form{max-width:400px;margin:30px auto;background:white;padding:20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.2);}
form input, form select{width:100%;padding:10px;margin:10px 0;border-radius:5px;border:1px solid #ccc;}
form button{padding:10px 15px;background:#3498db;color:white;border:none;border-radius:5px;cursor:pointer;}
form button:hover{background:#1d6fa5;}
.footer-nav{position:fixed;bottom:0;left:0;right:0;background:#2c3e50;display:flex;justify-content:space-around;padding:10px 0;}
.footer-nav a{color:white;text-decoration:none;font-weight:bold;font-size:14px;}
</style>
</head>
<body>
<header>
<h1>Proixe Store</h1>
<nav>
<a href="account.html">Account</a>
<a href="cart.html">Cart</a>
</nav>
</header>

<h2 style="text-align:center;">Checkout</h2>
<form id="checkout-form">
<input type="text" id="name" placeholder="Full Name" required>
<input type="text" id="phone" placeholder="Phone Number" required>
<input type="text" id="address" placeholder="Address" required>
<select id="payment" required>
<option value="">Select Payment Method</option>
<option value="Cash">Cash</option>
<option value="Card">Card</option>
</select>
<button type="button" onclick="placeOrder()">Place Order</button>
</form>

<div class="footer-nav">
<a href="index.html">Home</a>
<a href="plants.html">Plants</a>
<a href="grocery.html">Grocery</a>
<a href="clothes.html">Clothes</a>
<a href="account.html">Account</a>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
<script>
emailjs.init("YOUR_USER_ID"); // EmailJS User ID डालें

function placeOrder(){
 const name=document.getElementById("name").value;
 const phone=document.getElementById("phone").value;
 const address=document.getElementById("address").value;
 const payment=document.getElementById("payment").value;
 let cart=JSON.parse(localStorage.getItem("cart"))||[];
 if(cart.length===0){ alert("Cart is empty"); return; }

 const total=cart.reduce((sum,item)=>sum+item.discount*item.qty,0);
 const order={name,phone,address,payment,items:cart,total};

 // Save order locally
 let orders=JSON.parse(localStorage.getItem("orders"))||[];
 orders.push(order);
 localStorage.setItem("orders",JSON.stringify(orders));

 // Send email to owner
 const templateParams={
   to_name:"Owner",
   message:JSON.stringify(order,null,2),
   total:total
 };

 emailjs.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",templateParams)
   .then(function(response){
     alert("Order placed! Owner notified.");
     localStorage.removeItem("cart");
     window.location.href="account.html";
   }, function(error){
     alert("Order placed but email failed: "+error);
   });
}
</script>
</body>
</html>
