<script>
function renderCart(){
 let cart=JSON.parse(localStorage.getItem("cart"))||[];
 const container=document.getElementById("cart-items");
 container.innerHTML="";
 let total=0;

 cart.forEach((p,i)=>{
   total+=p.discount*p.qty;
   const div=document.createElement("div");
   div.className="cart-item";
   div.innerHTML=`
     <img src="${p.img}" alt="${p.name}">
     <span>${p.name}</span>
     <div>
       <button onclick="changeQty(${i}, -1)">-</button>
       <span id="qty-${i}">${p.qty}</span>
       <button onclick="changeQty(${i}, 1)">+</button>
     </div>
     <span>₹${p.discount*p.qty}</span>
     <button onclick="removeItem(${i})">Remove</button>
   `;
   container.appendChild(div);
 });
 document.getElementById("total").innerText="Total: ₹"+total;
}

// Change quantity
function changeQty(index, delta){
 let cart=JSON.parse(localStorage.getItem("cart"))||[];
 cart[index].qty += delta;
 if(cart[index].qty < 1) cart[index].qty = 1;
 localStorage.setItem("cart", JSON.stringify(cart));
 renderCart();
}

function removeItem(index){
 let cart=JSON.parse(localStorage.getItem("cart"))||[];
 cart.splice(index,1);
 localStorage.setItem("cart", JSON.stringify(cart));
 renderCart();
}

function checkout(){
 window.location.href="checkout.html";
}

renderCart();
</script>
